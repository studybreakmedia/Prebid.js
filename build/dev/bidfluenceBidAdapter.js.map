{"version":3,"sources":["webpack:///./modules/bidfluenceBidAdapter.js"],"names":["bidmanager","require","bidfactory","utils","adloader","adaptermanager","BidfluenceAdapter","scriptUrl","pbjs","bfPbjsCB","bfr","bidRequest","getBidRequest","cbID","bidObject","cpm","createBid","bidderCode","ad","width","height","addBidResponse","placementCode","_callBids","params","bfbids","bids","i","length","bid","call","adunitId","getBidIdParameter","publisherId","reservePrice","pbjsBfobj","bidId","cb","FORGE","init","loadScript","callBids","registerBidAdapter","module","exports"],"mappings":";;;;;;;;;;;;;;;;AAAA,IAAMA,aAAa,mBAAAC,CAAQ,CAAR,CAAnB;AACA,IAAMC,aAAa,mBAAAD,CAAQ,CAAR,CAAnB;AACA,IAAME,QAAQ,mBAAAF,CAAQ,CAAR,CAAd;AACA,IAAMG,WAAW,mBAAAH,CAAQ,CAAR,CAAjB;AACA,IAAMI,iBAAiB,mBAAAJ,CAAQ,CAAR,CAAvB;;AAEA,IAAIK,oBAAoB,SAASA,iBAAT,GAA6B;AACnD,MAAMC,YAAY,+BAAlB;;AAEAC,OAAKC,QAAL,GAAgB,UAAUC,GAAV,EAAe;AAC7B,QAAIC,aAAaR,MAAMS,aAAN,CAAoBF,IAAIG,IAAxB,CAAjB;AACA,QAAIC,YAAY,IAAhB;AACA,QAAIJ,IAAIK,GAAJ,GAAU,CAAd,EAAiB;AACfD,kBAAYZ,WAAWc,SAAX,CAAqB,CAArB,EAAwBL,UAAxB,CAAZ;AACAG,gBAAUG,UAAV,GAAuB,YAAvB;AACAH,gBAAUC,GAAV,GAAgBL,IAAIK,GAApB;AACAD,gBAAUI,EAAV,GAAeR,IAAIQ,EAAnB;AACAJ,gBAAUK,KAAV,GAAkBT,IAAIS,KAAtB;AACAL,gBAAUM,MAAV,GAAmBV,IAAIU,MAAvB;AACD,KAPD,MAOO;AACLN,kBAAYZ,WAAWc,SAAX,CAAqB,CAArB,EAAwBL,UAAxB,CAAZ;AACAG,gBAAUG,UAAV,GAAuB,YAAvB;AACD;;AAEDjB,eAAWqB,cAAX,CAA0BX,IAAIY,aAA9B,EAA6CR,SAA7C;AACD,GAhBD;;AAkBA,WAASS,SAAT,CAAmBC,MAAnB,EAA2B;AACzB,QAAIC,SAASD,OAAOE,IAAP,IAAe,EAA5B;AACA,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,OAAOG,MAA3B,EAAmCD,GAAnC,EAAwC;AACtC,UAAIE,MAAMJ,OAAOE,CAAP,CAAV;AACAG,WAAKD,GAAL;AACD;AACF;AACD,WAASC,IAAT,CAAcD,GAAd,EAAmB;AACjB,QAAIE,WAAW5B,MAAM6B,iBAAN,CAAwB,UAAxB,EAAoCH,IAAIL,MAAxC,CAAf;AACA,QAAIS,cAAc9B,MAAM6B,iBAAN,CAAwB,OAAxB,EAAiCH,IAAIL,MAArC,CAAlB;AACA,QAAIU,eAAe/B,MAAM6B,iBAAN,CAAwB,cAAxB,EAAwCH,IAAIL,MAA5C,CAAnB;AACA,QAAIW,YAAY;AACdb,qBAAeO,IAAIP,aADL;AAEdT,YAAMgB,IAAIO;AAFI,KAAhB;;AAKA,QAAIC,KAAK,SAALA,EAAK,GAAY;AACnB;AACAC,YAAMC,IAAN,CAAW,CAACR,QAAD,EAAWE,WAAX,EAAwBE,SAAxB,EAAmCD,YAAnC,CAAX;AACD,KAHD;;AAKA9B,aAASoC,UAAT,CAAoBjC,SAApB,EAA+B8B,EAA/B;AACD;AACD,SAAO;AACLI,cAAUlB;AADL,GAAP;AAGD,CA/CD;;AAiDAlB,eAAeqC,kBAAf,CAAkC,IAAIpC,iBAAJ,EAAlC,EAA2D,YAA3D;;AAEAqC,OAAOC,OAAP,GAAiBtC,iBAAjB,C","file":"bidfluenceBidAdapter.js","sourcesContent":["const bidmanager = require('src/bidmanager');\nconst bidfactory = require('src/bidfactory');\nconst utils = require('src/utils');\nconst adloader = require('src/adloader');\nconst adaptermanager = require('src/adaptermanager');\n\nvar BidfluenceAdapter = function BidfluenceAdapter() {\n  const scriptUrl = '//cdn.bidfluence.com/forge.js';\n\n  pbjs.bfPbjsCB = function (bfr) {\n    var bidRequest = utils.getBidRequest(bfr.cbID);\n    var bidObject = null;\n    if (bfr.cpm > 0) {\n      bidObject = bidfactory.createBid(1, bidRequest);\n      bidObject.bidderCode = 'bidfluence';\n      bidObject.cpm = bfr.cpm;\n      bidObject.ad = bfr.ad;\n      bidObject.width = bfr.width;\n      bidObject.height = bfr.height;\n    } else {\n      bidObject = bidfactory.createBid(2, bidRequest);\n      bidObject.bidderCode = 'bidfluence';\n    }\n\n    bidmanager.addBidResponse(bfr.placementCode, bidObject);\n  };\n\n  function _callBids(params) {\n    var bfbids = params.bids || [];\n    for (var i = 0; i < bfbids.length; i++) {\n      var bid = bfbids[i];\n      call(bid);\n    }\n  }\n  function call(bid) {\n    var adunitId = utils.getBidIdParameter('adunitId', bid.params);\n    var publisherId = utils.getBidIdParameter('pubId', bid.params);\n    var reservePrice = utils.getBidIdParameter('reservePrice', bid.params);\n    var pbjsBfobj = {\n      placementCode: bid.placementCode,\n      cbID: bid.bidId\n    };\n\n    var cb = function () {\n      /* globals FORGE */\n      FORGE.init([adunitId, publisherId, pbjsBfobj, reservePrice]);\n    };\n\n    adloader.loadScript(scriptUrl, cb);\n  }\n  return {\n    callBids: _callBids\n  };\n};\n\nadaptermanager.registerBidAdapter(new BidfluenceAdapter(), 'bidfluence');\n\nmodule.exports = BidfluenceAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/bidfluenceBidAdapter.js"],"sourceRoot":""}