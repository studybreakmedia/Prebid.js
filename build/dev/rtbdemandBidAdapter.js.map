{"version":3,"sources":["webpack:///./modules/rtbdemandBidAdapter.js"],"names":["utils","BIDDER_CODE","BIDDER_SERVER","spec","code","isBidRequestValid","bid","params","zoneid","buildRequests","validBidRequests","bidderRequest","map","server","bidRequest","parse","getSize","bids","sizes","payload","from","v","request_id","bidderRequestId","imp_id","bidId","aff","bid_floor","parseFloat","floor","charset","document","charSet","characterSet","site_domain","location","hostname","site_page","window","href","subid","flashver","getFlashVersion","tmax","timeout","hb","name","width","height","device_width","screen","device_height","dnt","navigator","doNotTrack","msDoNotTrack","secure","isSecure","make","vendor","referrer","method","url","data","interpretResponse","serverResponse","body","bidResponses","seatbid","forEach","seatBid","bidResponse","requestId","impid","creativeId","cpm","price","w","h","ad","adm","netRevenue","currency","ttl","push","getUserSyncs","syncOptions","iframeEnabled","type","plugins","plugin","result","length","i","indexOf","description","split","requestSizes","parsed","size","parseSizesInput","parsedSize","toUpperCase","parseInt","protocol"],"mappings":"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","file":"rtbdemandBidAdapter.js","sourcesContent":["import * as utils from 'src/utils';\r\nimport {registerBidder} from 'src/adapters/bidderFactory';\r\n\r\nconst BIDDER_CODE = 'rtbdemand';\r\nconst BIDDER_SERVER = 'bidding.rtbdemand.com';\r\nexport const spec = {\r\n  code: BIDDER_CODE,\r\n  isBidRequestValid: function(bid) {\r\n    return !!(bid && bid.params && bid.params.zoneid);\r\n  },\r\n  buildRequests: function(validBidRequests, bidderRequest) {\n    return validBidRequests.map(bidRequest => {\n      var server = bidRequest.params.server || BIDDER_SERVER;\n      var parse = getSize(bidderRequest.bids[0].sizes);\n      const payload = {\n        from: 'hb',\n        v: '1.0',\n        request_id: bidRequest.bidderRequestId,\n        imp_id: bidRequest.bidId,\n        aff: bidRequest.params.zoneid,\n        bid_floor: parseFloat(bidRequest.params.floor) > 0 ? bidRequest.params.floor : 0,\n        charset: document.charSet || document.characterSet,\n        site_domain: document.location.hostname,\n        site_page: window.location.href,\n        subid: 'hb',\n        flashver: getFlashVersion(),\n        tmax: bidderRequest.timeout,\n        hb: '1',\n        name: document.location.hostname,\n        width: parse.width,\n        height: parse.height,\n        device_width: screen.width,\n        device_height: screen.height,\n        dnt: (navigator.doNotTrack == 'yes' || navigator.doNotTrack == '1' || navigator.msDoNotTrack == '1') ? 1 : 0,\n        secure: isSecure(),\n        make: navigator.vendor ? navigator.vendor : '',\n      };\n      if (document.referrer) {\n        payload.referrer = document.referrer;\r\n      }\r\n\n      return {\n        method: 'GET',\n        url: '//' + server + '/hb',\n        data: payload\n      };\n    });\n  },\n  interpretResponse: function(serverResponse) {\r\n    serverResponse = serverResponse.body;\r\n    const bidResponses = [];\n    if (serverResponse && serverResponse.seatbid) {\n      serverResponse.seatbid.forEach(seatBid => seatBid.bid.forEach(bid => {\n        const bidResponse = {\n          requestId: bid.impid,\r\n          creativeId: bid.impid,\n          cpm: bid.price,\n          width: bid.w,\n          height: bid.h,\n          ad: bid.adm,\n          netRevenue: true,\n          currency: 'USD',\n          ttl: 360,\r\n        };\n\n        bidResponses.push(bidResponse);\n      }));\n    }\n    return bidResponses;\r\n  },\n  getUserSyncs: function getUserSyncs(syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      return [{\r\n        type: 'iframe',\r\n        url: '//' + BIDDER_SERVER + '/delivery/matches.php?type=iframe',\r\n      }];\n    }\n  }\r\n}\r\n\r\nfunction getFlashVersion() {\n  var plugins, plugin, result;\n\n  if (navigator.plugins && navigator.plugins.length > 0) {\n    plugins = navigator.plugins;\n    for (var i = 0; i < plugins.length && !result; i++) {\n      plugin = plugins[i];\n      if (plugin.name.indexOf('Shockwave Flash') > -1) {\n        result = plugin.description.split('Shockwave Flash ')[1];\n      }\n    }\n  }\n  return result || '';\n}\r\n\n/* Get parsed size from request size */\nfunction getSize(requestSizes) {\n  const parsed = {};\n  const size = utils.parseSizesInput(requestSizes)[0];\n\n  if (typeof size !== 'string') {\n    return parsed;\n  }\n\n  const parsedSize = size.toUpperCase().split('X');\n  const width = parseInt(parsedSize[0], 10);\n  if (width) {\n    parsed.width = width;\n  }\n\n  const height = parseInt(parsedSize[1], 10);\n  if (height) {\n    parsed.height = height;\n  }\n\n  return parsed;\n}\n\nfunction isSecure() {\n  return document.location.protocol === 'https:';\n}\n\nregisterBidder(spec);\r\n\n\n\n// WEBPACK FOOTER //\n// ./modules/rtbdemandBidAdapter.js"],"sourceRoot":""}