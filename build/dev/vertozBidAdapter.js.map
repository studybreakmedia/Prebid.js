{"version":3,"sources":["webpack:///./modules/vertozBidAdapter.js"],"names":["CONSTANTS","require","utils","bidfactory","bidmanager","adloader","adaptermanager","VertozAdapter","BASE_URI","BIDDER_NAME","QUERY_PARAM_KEY","_callBids","params","bids","i","length","bid","slotBidId","getValue","cb","Math","round","Date","getTime","vzEndPoint","reqParams","placementId","cpm","isEmptyStr","logError","reqSrc","getTopWindowLocation","href","vzReq","_vzPlacementId","_rqsrc","_cb","_slotBidId","_cpm","_cbn","queryParamValue","JSON","stringify","tryAppendQueryString","loadScript","pbjs","vzResponse","vertozResponse","bidRespObj","bidObject","reqBidObj","getBidRequest","createBid","STATUS","GOOD","Number","ad","createTrackPixelHtml","decodeURIComponent","nurl","width","adWidth","height","adHeight","respStatusText","statusText","NO_BID","logMessage","adSpaceId","placementCode","bidderCode","addBidResponse","callBids","registerBidAdapter","module","exports"],"mappings":"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","file":"vertozBidAdapter.js","sourcesContent":["var CONSTANTS = require('src/constants.json');\nvar utils = require('src/utils.js');\nvar bidfactory = require('src/bidfactory.js');\nvar bidmanager = require('src/bidmanager.js');\nvar adloader = require('src/adloader.js');\nvar adaptermanager = require('src/adaptermanager');\n\nfunction VertozAdapter() {\n  const BASE_URI = '//hb.vrtzads.com/vzhbidder/bid?';\n  const BIDDER_NAME = 'vertoz';\n  const QUERY_PARAM_KEY = 'q';\n\n  function _callBids(params) {\n    var bids = params.bids || [];\n\n    for (var i = 0; i < bids.length; i++) {\n      var bid = bids[i];\n      let slotBidId = utils.getValue(bid, 'bidId');\n      let cb = Math.round(new Date().getTime() / 1000);\n      let vzEndPoint = BASE_URI;\n      let reqParams = bid.params || {};\n      let placementId = utils.getValue(reqParams, 'placementId');\n      let cpm = utils.getValue(reqParams, 'cpmFloor');\n\n      if (utils.isEmptyStr(placementId)) {\n        utils.logError('missing params:', BIDDER_NAME, 'Enter valid vzPlacementId');\n        return;\n      }\n\n      let reqSrc = utils.getTopWindowLocation().href;\n      var vzReq = {\n        _vzPlacementId: placementId,\n        _rqsrc: reqSrc,\n        _cb: cb,\n        _slotBidId: slotBidId,\n        _cpm: cpm,\n        _cbn: 'pbjs'\n      };\n\n      let queryParamValue = JSON.stringify(vzReq);\n      vzEndPoint = utils.tryAppendQueryString(vzEndPoint, QUERY_PARAM_KEY, queryParamValue);\n      adloader.loadScript(vzEndPoint);\n    }\n  }\n\n  pbjs.vzResponse = function (vertozResponse) {\n    var bidRespObj = vertozResponse;\n    var bidObject;\n    var reqBidObj = utils.getBidRequest(bidRespObj.slotBidId);\n\n    if (bidRespObj.cpm) {\n      bidObject = bidfactory.createBid(CONSTANTS.STATUS.GOOD, reqBidObj);\n      bidObject.cpm = Number(bidRespObj.cpm);\n      bidObject.ad = bidRespObj.ad + utils.createTrackPixelHtml(decodeURIComponent(bidRespObj.nurl));\n      bidObject.width = bidRespObj.adWidth;\n      bidObject.height = bidRespObj.adHeight;\n    } else {\n      let respStatusText = bidRespObj.statusText;\n      bidObject = bidfactory.createBid(CONSTANTS.STATUS.NO_BID, reqBidObj);\n      utils.logMessage(respStatusText);\n    }\n\n    var adSpaceId = reqBidObj.placementCode;\n    bidObject.bidderCode = BIDDER_NAME;\n    bidmanager.addBidResponse(adSpaceId, bidObject);\n  };\n  return { callBids: _callBids };\n}\n\nadaptermanager.registerBidAdapter(new VertozAdapter(), 'vertoz');\n\nmodule.exports = VertozAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/vertozBidAdapter.js"],"sourceRoot":""}