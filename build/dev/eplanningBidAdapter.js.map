{"version":3,"sources":["webpack:///./modules/eplanningBidAdapter.js"],"names":["bidfactory","require","bidmanager","adaptermanager","EPlanningAdapter","win","window","doc","document","pbjsVar","pbjs","_global","_default","rnd","FILE","CALLBACK_FUNCTION","NULL_SIZE","_csRequested","PROTO","location","protocol","ISV","Hbpb","slots","_data","Slot","slotId","data","hasAds","ads","length","getSizes","sizes","getSizesString","s","i","push","join","getPlacementCode","placementCode","getString","addAd","ad","getFormatedResponse","that","adm","pr","size","w","h","findAll","r","add","slot","get","_slots","findByPlacementCode","call","params","bids","_raw","setGlobalParam","doRequest","param","bid","getGlobalParam","getRandom","Math","random","getDocURL","escape","href","getReferrerURL","referrer","getCallbackFunction","clienteId","url","dfpClienteId","sec","t","hostname","load","script","createElement","src","body","appendChild","callback","response","processEPlanningResponse","syncUsers","cs","e","d","indexOf","Image","u","j","ifr","style","width","height","display","hasOwnProperty","setAttribute","rH","o","sp","a","k","hbpb","bidObject","getBidObject","addBidResponse","createBid","bidderCode","_callBids","callBids","registerBidAdapter","module","exports"],"mappings":"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","file":"eplanningBidAdapter.js","sourcesContent":["var bidfactory = require('src/bidfactory.js');\nvar bidmanager = require('src/bidmanager.js');\nvar adaptermanager = require('src/adaptermanager');\n\nfunction EPlanningAdapter() {\n  (function() {\n    const win = window;\n    const doc = win.document;\n    const pbjsVar = win.pbjs;\n    const _global = {};\n    const _default = { 'sv': 'ads.us.e-planning.net', 't': 0 };\n    var rnd;\n    const FILE = 'file';\n    const CALLBACK_FUNCTION = 'hbpb.rH';\n    const NULL_SIZE = '1x1';\n    const _csRequested = [];\n    const PROTO = location.protocol === 'https:' ? 'https:' : 'http:';\n    const ISV = 'aklc.img.e-planning.net';\n    function Hbpb() {\n      var slots = (function() {\n        var _data = [];\n        function Slot(slotId) {\n          var data = _data[slotId];\n          function hasAds() {\n            return _data[slotId].ads.length;\n          }\n          function getSizes() {\n            return data.sizes;\n          }\n          function getSizesString() {\n            const s = [];\n            var i;\n            const sizes = getSizes();\n            if (sizes && sizes.length) {\n              if (typeof sizes[0] === 'object') {\n                for (i = 0; i < sizes.length; i++) {\n                  s.push(sizes[i][0] + 'x' + sizes[i][1]);\n                }\n              } else {\n                s.push(sizes[0] + 'x' + sizes[1]);\n              }\n            } else {\n              return NULL_SIZE;\n            }\n            return s.join(',');\n          }\n          return {\n            getPlacementCode: function() {\n              return data.placementCode;\n            },\n            getString: function() {\n              return this.getPlacementCode() + ':' + getSizesString();\n            },\n            addAd: function(ad) {\n              _data[slotId].ads.push(ad);\n            },\n            getFormatedResponse: function() {\n              var ad;\n              const that = this;\n              if (hasAds()) {\n                ad = data.ads[0];\n                return {\n                  'placementCode': that.getPlacementCode(),\n                  'ad': {\n                    'ad': ad.adm,\n                    'cpm': ad.pr,\n                    'width': ad.size.w,\n                    'height': ad.size.h\n                  }\n                };\n              } else {\n                return { 'placementCode': that.getPlacementCode() };\n              }\n            }\n          };\n        }\n        function findAll() {\n          var i = 0;\n          const r = [];\n          for (i = 0; i < _data.length; i++) {\n            r.push(new Slot(i));\n          }\n          return r;\n        }\n        return {\n          add: function(slot) {\n            slot.ads = [];\n            _data.push(slot);\n          },\n          get: function(slotId) {\n            return new Slot(slotId);\n          },\n          getString: function() {\n            const _slots = [];\n            var i;\n            var slot;\n            for (i = 0; i < _data.length; i++) {\n              slot = this.get(i);\n              _slots.push(slot.getString());\n            }\n            return _slots.join('+');\n          },\n          findByPlacementCode: function(placementCode) {\n            var i;\n            const _slots = findAll();\n            for (i = 0; i < _slots.length; i++) {\n              if (_slots[i].getPlacementCode() === placementCode) {\n                return _slots[i];\n              }\n            }\n          },\n          getFormatedResponse: function() {\n            const _slots = findAll();\n            var i;\n            const r = [];\n            for (i = 0; i < _slots.length; i++) {\n              r.push(_slots[i].getFormatedResponse());\n            }\n            return {\n              'bids': r\n            };\n          }\n        };\n      })();\n      function call(params) {\n        var i;\n        const bids = params.bids;\n        for (i = 0; i < bids.length; i++) {\n          slots.add({\n            _raw: bids[i],\n            placementCode: bids[i].placementCode,\n            sizes: bids[i].sizes\n          });\n          setGlobalParam('sv', bids[i]);\n          setGlobalParam('ci', bids[i]);\n          setGlobalParam('t', bids[i]);\n        }\n        doRequest();\n      }\n      function setGlobalParam(param, bid) {\n        if (!_global[param]) {\n          if (bid && bid.params && bid.params[param]) {\n            _global[param] = bid.params[param];\n          }\n        }\n      }\n      function getGlobalParam(param) {\n        return (_global[param] || _default[param]);\n      }\n      function getRandom() {\n        if (!rnd) {\n          rnd = Math.random();\n        }\n        return rnd;\n      }\n      function getDocURL() {\n        return escape(win.location.href || FILE);\n      }\n      function getReferrerURL() {\n        return doc.referrer;\n      }\n      function getCallbackFunction() {\n        return CALLBACK_FUNCTION;\n      }\n      function doRequest() {\n        const clienteId = getGlobalParam('ci');\n        var url;\n        const dfpClienteId = '1';\n        const sec = 'ROS';\n        const params = [];\n        const t = getGlobalParam('t');\n        if (clienteId && !t) {\n          url = PROTO + '//' + getGlobalParam('sv') + '/hb/1/' + clienteId + '/' + dfpClienteId + '/' + (win.location.hostname || FILE) + '/' + sec + '?';\n          params.push('rnd=' + getRandom());\n          params.push('e=' + slots.getString());\n          if (getDocURL()) {\n            params.push('ur=' + getDocURL());\n          }\n          if (getReferrerURL()) {\n            params.push('fr=' + getReferrerURL());\n          }\n          params.push('cb=' + getCallbackFunction());\n          params.push('r=pbjs');\n          url += params.join('&');\n          load(url);\n        } else if (t) {\n          url = PROTO + '//' + ISV + '/layers/t_pbjs_' + t + '.js';\n          load(url);\n        }\n      }\n      function load(url) {\n        var script = doc.createElement('script');\n        script.src = url;\n        doc.body.appendChild(script);\n      }\n      function callback(response) {\n        if (pbjsVar && pbjsVar.processEPlanningResponse && typeof pbjsVar.processEPlanningResponse === 'function') {\n          pbjsVar.processEPlanningResponse(response);\n        }\n      }\n      function syncUsers(cs) {\n        var i, e, d;\n        for (i = 0; i < cs.length; i++) {\n          if (typeof cs[i] === 'string' && _csRequested.indexOf(cs[i]) === -1) {\n            (new Image()).src = cs[i];\n            _csRequested.push(cs[i]);\n          } else if (typeof cs[i] === 'object' && _csRequested.indexOf(cs[i].u) === -1) {\n            if (cs[i].j) {\n              e = doc.createElement('script');\n              e.src = cs[i].u;\n            } else if (cs[i].ifr) {\n              e = doc.createElement('iframe');\n              e.src = cs[i].u;\n              e.style.width = e.style.height = '1px';\n              e.display = 'none';\n            }\n            if (cs[i].data) {\n              for (d in cs[i].data) {\n                if (cs[i].data.hasOwnProperty(d)) {\n                  e.setAttribute('data-' + d, cs[i].data[d]);\n                }\n              }\n            }\n            doc.body.appendChild(e);\n            _csRequested.push(cs[i].u);\n          }\n        }\n      }\n      function rH(response) {\n        var slot, i, o;\n        if (response && response.sp && response.sp.length) {\n          for (i = 0; i < response.sp.length; i++) {\n            if (response.sp[i].a) {\n              slot = slots.findByPlacementCode(response.sp[i].k);\n              if (slot) {\n                for (o = 0; o < response.sp[i].a.length; o++) {\n                  slot.addAd({\n                    'adm': response.sp[i].a[o].adm,\n                    'pr': response.sp[i].a[o].pr,\n                    'size': {\n                      'w': response.sp[i].a[o].w,\n                      'h': response.sp[i].a[o].h\n                    }\n                  });\n                }\n              }\n            }\n          }\n          callback(slots.getFormatedResponse());\n        }\n        if (response && response.cs && response.cs.length) {\n          syncUsers(response.cs);\n        }\n      }\n      return {\n        call: function(params) {\n          return call(params);\n        },\n        rH: function(response) {\n          return rH(response);\n        }\n      };\n    }\n    win.hbpb = win.hbpb || new Hbpb();\n  })();\n\n  window.pbjs = window.pbjs || {};\n  window.pbjs.processEPlanningResponse = function(response) {\n    var bids, bidObject, i;\n    if (response) {\n      bids = response.bids;\n      for (i = 0; i < bids.length; i++) {\n        if (bids[i].ad) {\n          bidObject = getBidObject(bids[i]);\n          bidmanager.addBidResponse(bids[i].placementCode, bidObject);\n        } else {\n          bidObject = bidfactory.createBid(2);\n          bidObject.bidderCode = 'eplanning';\n          bidmanager.addBidResponse(bids[i].placementCode, bidObject);\n        }\n      }\n    }\n  };\n\n  function getBidObject(bid) {\n    const bidObject = bidfactory.createBid(1);\n    var i;\n    bidObject.bidderCode = 'eplanning';\n    for (i in bid.ad) {\n      if (bid.ad.hasOwnProperty(i)) {\n        bidObject[i] = bid.ad[i];\n      }\n    }\n    return bidObject;\n  }\n\n  function _callBids(params) {\n    if (window.hbpb) {\n      window.hbpb.call(params);\n    }\n  }\n\n  return {\n    callBids: _callBids\n  };\n}\n\nadaptermanager.registerBidAdapter(new EPlanningAdapter(), 'eplanning');\n\nmodule.exports = EPlanningAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/eplanningBidAdapter.js"],"sourceRoot":""}