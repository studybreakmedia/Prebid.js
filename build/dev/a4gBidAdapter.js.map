{"version":3,"sources":["webpack:///./modules/a4gBidAdapter.js"],"names":["utils","A4G_BIDDER_CODE","A4G_CURRENCY","A4G_DEFAULT_BID_URL","A4G_TTL","LOCATION_PARAM_NAME","ID_PARAM_NAME","IFRAME_PARAM_NAME","ZONE_ID_PARAM_NAME","SIZE_PARAM_NAME","ARRAY_PARAM_SEPARATOR","ARRAY_SIZE_SEPARATOR","SIZE_SEPARATOR","spec","code","isBidRequestValid","bid","params","zoneId","buildRequests","validBidRequests","deliveryUrl","bidId","idParams","sizeParams","zoneIds","_each","push","placementCode","sizes","map","size","join","method","url","data","getTopWindowUrl","interpretResponse","serverResponses","request","bidResponses","body","response","bidResponse","requestId","cpm","width","height","creativeId","zoneid","currency","netRevenue","ttl","ad"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;IAAYA,K;;;;;;AAEZ,IAAMC,kBAAkB,KAAxB;AACA,IAAMC,eAAe,KAArB;AACA,IAAMC,sBAAsB,0BAA5B;AACA,IAAMC,UAAU,GAAhB;;AAEA,IAAMC,sBAAsB,SAA5B;AACA,IAAMC,gBAAgB,IAAtB;AACA,IAAMC,oBAAoB,IAA1B;AACA,IAAMC,qBAAqB,QAA3B;AACA,IAAMC,kBAAkB,MAAxB;;AAEA,IAAMC,wBAAwB,GAA9B;AACA,IAAMC,uBAAuB,GAA7B;AACA,IAAMC,iBAAiB,GAAvB;;AAEO,IAAMC,sBAAO;AAClBC,QAAMb,eADY;AAElBc,qBAAmB,2BAASC,GAAT,EAAc;AAC/B,WAAOA,IAAIC,MAAJ,IAAc,CAAC,CAACD,IAAIC,MAAJ,CAAWC,MAAlC;AACD,GAJiB;;AAMlBC,iBAAe,uBAASC,gBAAT,EAA2B;AAAA;;AACxC,QAAIC,cAAc,EAAlB;AACA,QAAIC,QAAQ,EAAZ;AACA,QAAMC,WAAW,EAAjB;AACA,QAAMC,aAAa,EAAnB;AACA,QAAMC,UAAU,EAAhB;;AAEAzB,UAAM0B,KAAN,CAAYN,gBAAZ,EAA8B,UAASJ,GAAT,EAAc;AAC1C,UAAI,CAACK,WAAD,IAAgB,OAAOL,IAAIC,MAAJ,CAAWI,WAAlB,KAAkC,QAAtD,EAAgE;AAC9DA,sBAAcL,IAAIC,MAAJ,CAAWI,WAAzB;AACD;AACD,UAAI,CAACC,KAAL,EAAY;AACVA,gBAAQN,IAAIM,KAAZ;AACD;AACDC,eAASI,IAAT,CAAcX,IAAIY,aAAlB;AACAJ,iBAAWG,IAAX,CAAgBX,IAAIa,KAAJ,CAAUC,GAAV,CAAc;AAAA,eAAQC,KAAKC,IAAL,CAAUpB,cAAV,CAAR;AAAA,OAAd,EAAiDoB,IAAjD,CAAsDrB,oBAAtD,CAAhB;AACAc,cAAQE,IAAR,CAAaX,IAAIC,MAAJ,CAAWC,MAAxB;AACD,KAVD;;AAYA,QAAI,CAACG,WAAL,EAAkB;AAChBA,oBAAclB,mBAAd;AACD;;AAED,WAAO;AACL8B,cAAQ,KADH;AAELC,WAAKb,WAFA;AAGLC,aAAOA,KAHF;AAILa,gDACG5B,iBADH,EACuB,CADvB,0BAEGF,mBAFH,EAEyBL,MAAMoC,eAAN,EAFzB,0BAGG3B,eAHH,EAGqBe,WAAWQ,IAAX,CAAgBtB,qBAAhB,CAHrB,0BAIGJ,aAJH,EAImBiB,SAASS,IAAT,CAActB,qBAAd,CAJnB,0BAKGF,kBALH,EAKwBiB,QAAQO,IAAR,CAAatB,qBAAb,CALxB;AAJK,KAAP;AAYD,GAzCiB;;AA2ClB2B,qBAAmB,2BAASC,eAAT,EAA0BC,OAA1B,EAAmC;AACpD,QAAMC,eAAe,EAArB;AACAxC,UAAM0B,KAAN,CAAYY,gBAAgBG,IAA5B,EAAkC,UAASC,QAAT,EAAmB;AACnD,UAAMC,cAAc;AAClBC,mBAAWL,QAAQjB,KADD;AAElBuB,aAAKH,SAASG,GAFI;AAGlBC,eAAOJ,SAASI,KAHE;AAIlBC,gBAAQL,SAASK,MAJC;AAKlBC,oBAAYN,SAASO,MALH;AAMlBC,kBAAUhD,YANQ;AAOlBiD,oBAAY,IAPM;AAQlBC,aAAKhD,OARa;AASlBiD,YAAIX,SAASW;AATK,OAApB;AAWAb,mBAAab,IAAb,CAAkBgB,WAAlB;AACD,KAbD;;AAeA,WAAOH,YAAP;AACD;AA7DiB,CAAb;;AAgEP,mCAAe3B,IAAf,E","file":"a4gBidAdapter.js","sourcesContent":["import {registerBidder} from 'src/adapters/bidderFactory';\nimport * as utils from 'src/utils';\n\nconst A4G_BIDDER_CODE = 'a4g';\nconst A4G_CURRENCY = 'USD';\nconst A4G_DEFAULT_BID_URL = '//ads.ad4game.com/v1/bid';\nconst A4G_TTL = 120;\n\nconst LOCATION_PARAM_NAME = 'siteurl';\nconst ID_PARAM_NAME = 'id';\nconst IFRAME_PARAM_NAME = 'if';\nconst ZONE_ID_PARAM_NAME = 'zoneId';\nconst SIZE_PARAM_NAME = 'size';\n\nconst ARRAY_PARAM_SEPARATOR = ';';\nconst ARRAY_SIZE_SEPARATOR = ',';\nconst SIZE_SEPARATOR = 'x';\n\nexport const spec = {\n  code: A4G_BIDDER_CODE,\n  isBidRequestValid: function(bid) {\n    return bid.params && !!bid.params.zoneId;\n  },\n\n  buildRequests: function(validBidRequests) {\n    let deliveryUrl = '';\n    let bidId = '';\n    const idParams = [];\n    const sizeParams = [];\n    const zoneIds = [];\n\n    utils._each(validBidRequests, function(bid) {\n      if (!deliveryUrl && typeof bid.params.deliveryUrl === 'string') {\n        deliveryUrl = bid.params.deliveryUrl;\n      }\n      if (!bidId) {\n        bidId = bid.bidId;\n      }\n      idParams.push(bid.placementCode);\n      sizeParams.push(bid.sizes.map(size => size.join(SIZE_SEPARATOR)).join(ARRAY_SIZE_SEPARATOR));\n      zoneIds.push(bid.params.zoneId);\n    });\n\n    if (!deliveryUrl) {\n      deliveryUrl = A4G_DEFAULT_BID_URL;\n    }\n\n    return {\n      method: 'GET',\n      url: deliveryUrl,\n      bidId: bidId,\n      data: {\n        [IFRAME_PARAM_NAME]: 0,\n        [LOCATION_PARAM_NAME]: utils.getTopWindowUrl(),\n        [SIZE_PARAM_NAME]: sizeParams.join(ARRAY_PARAM_SEPARATOR),\n        [ID_PARAM_NAME]: idParams.join(ARRAY_PARAM_SEPARATOR),\n        [ZONE_ID_PARAM_NAME]: zoneIds.join(ARRAY_PARAM_SEPARATOR)\n      }\n    };\n  },\n\n  interpretResponse: function(serverResponses, request) {\n    const bidResponses = [];\n    utils._each(serverResponses.body, function(response) {\n      const bidResponse = {\n        requestId: request.bidId,\n        cpm: response.cpm,\n        width: response.width,\n        height: response.height,\n        creativeId: response.zoneid,\n        currency: A4G_CURRENCY,\n        netRevenue: true,\n        ttl: A4G_TTL,\n        ad: response.ad\n      };\n      bidResponses.push(bidResponse);\n    });\n\n    return bidResponses;\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/a4gBidAdapter.js"],"sourceRoot":""}