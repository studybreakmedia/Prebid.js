{"version":3,"sources":["webpack:///./modules/coxBidAdapter.js"],"names":["bidfactory","require","bidmanager","adLoader","adaptermanager","CoxAdapter","adZoneAttributeKeys","otherKeys","placementMap","W","window","COX_BIDDER_CODE","_callBids","params","env","cdsTag","CMT","_getCoxLite","bids","tag","i","j","length","bid","cfg","id","zones","zone","adZoneKey","xy","size","split","p","placementCode","w","h","Object","keys","__callback__","r","response","_notify","loadScript","Service","buildSrc","getBidTrue","bidObj","data","createBid","cpm","ad","getAd","width","height","bidderCode","addBidResponse","Util","getRand","Math","round","random","encodeUriObject","obj","encodeURIComponent","JSON","stringify","extractUrlInfo","f2","callback","location","ancestorOrigins","len","ignore","f1","oneWindow","infoArray","parent","t","push","referrer","isTop","top","allInfo","document","href","e","n","ancestor","l","url","depth","srTestCapabilities","plugins","navigator","flashVer","sf","swVer2","flashDescription","description","U","src","protocol","Date","valueOf","urlInfo","pageUrl","puTop","zoneKey","_getData","_getResponse","tpCookieSync","field","zoneResponseData","callBids","registerBidAdapter","module","exports"],"mappings":"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","file":"coxBidAdapter.js","sourcesContent":["var bidfactory = require('src/bidfactory.js');\nvar bidmanager = require('src/bidmanager.js');\nvar adLoader = require('src/adloader.js');\nvar adaptermanager = require('src/adaptermanager');\n\nfunction CoxAdapter() {\n  const adZoneAttributeKeys = ['id', 'size', 'thirdPartyClickUrl'];\n  const otherKeys = ['siteId', 'wrapper', 'referrerUrl'];\n  const placementMap = {};\n  const W = window;\n\n  var COX_BIDDER_CODE = 'cox';\n\n  function _callBids(params) {\n    var env = '';\n\n    // Create global cdsTag and CMT object (for the latter, only if needed )\n    W.cdsTag = {};\n    if (!W.CMT) W.CMT = _getCoxLite();\n\n    // Populate the tag with the info from prebid\n    const bids = params.bids || [];\n    const tag = W.cdsTag;\n    var i;\n    var j;\n    for (i = 0; i < bids.length; i++) {\n      const bid = bids[i];\n      const cfg = bid.params || {};\n\n      if (cfg.id) {\n        tag.zones = tag.zones || {};\n        var zone = {};\n\n        for (j = 0; j < adZoneAttributeKeys.length; j++) {\n          if (cfg[adZoneAttributeKeys[j]]) zone[adZoneAttributeKeys[j]] = cfg[adZoneAttributeKeys[j]];\n        }\n        for (j = 0; j < otherKeys.length; j++) {\n          if (cfg[otherKeys[j]]) tag[otherKeys[j]] = cfg[otherKeys[j]];\n        }\n        var adZoneKey = 'as' + cfg.id;\n        tag.zones[adZoneKey] = zone;\n\n        // Check for an environment setting\n        if (cfg.env) env = cfg.env;\n\n        // Update the placement map\n        var xy = (cfg.size || '0x0').split('x');\n        placementMap[adZoneKey] = {\n          p: bid.placementCode,\n          w: xy[0],\n          h: xy[1]\n        };\n      }\n    }\n    if (tag.zones && Object.keys(tag.zones).length > 0) {\n      tag.__callback__ = function (r) {\n        tag.response = r;\n        _notify();\n      };\n      adLoader.loadScript(W.CMT.Service.buildSrc(tag, env));\n    }\n  }\n\n  function _notify() {\n    // Will execute in the context of a bid\n    // function finalizeAd(price) {\n    //   this.ad = W.CMT.Service.setAuctionPrice(this.ad, price);\n    //   return this;\n    // }\n\n    for (var adZoneKey in placementMap) {\n      var bid = W.CMT.Service.getBidTrue(adZoneKey);\n      var bidObj;\n      var data = placementMap[adZoneKey];\n\n      if (bid > 0) {\n        bidObj = bidfactory.createBid(1);\n        bidObj.cpm = bid;\n        bidObj.ad = W.CMT.Service.getAd(adZoneKey);\n        bidObj.width = data.w;\n        bidObj.height = data.h;\n        // bidObj.floor = W.CMT.Service.getSecondPrice(adZoneKey);\n        // bidObj.finalizeAd = finalizeAd;\n      } else {\n        bidObj = bidfactory.createBid(2);\n      }\n      bidObj.bidderCode = COX_BIDDER_CODE;\n      bidmanager.addBidResponse(data.p, bidObj);\n    }\n  }\n\n  function _getCoxLite() {\n    var CMT = {};\n\n    CMT.Util = (function () {\n      return {\n\n        getRand: function getRand() {\n          return Math.round(Math.random() * 100000000);\n        },\n\n        encodeUriObject: function encodeUriObject(obj) {\n          return encodeURIComponent(JSON.stringify(obj));\n        },\n\n        extractUrlInfo: function extractUrlInfo() {\n          function f2(callback) {\n            try {\n              if (!W.location.ancestorOrigins) return;\n              for (var i = 0, len = W.location.ancestorOrigins.length; len > i; i++) {\n                callback(W.location.ancestorOrigins[i], i);\n              }\n            } catch (ignore) { }\n            return [];\n          }\n\n          function f1(callback) {\n            var oneWindow;\n            const infoArray = [];\n            do {\n              try {\n                oneWindow = oneWindow ? oneWindow.parent : W;\n                callback(oneWindow, infoArray);\n              } catch (t) {\n                infoArray.push({\n                  referrer: null,\n                  location: null,\n                  isTop: !1\n                });\n                return infoArray;\n              }\n            } while (oneWindow !== W.top);\n            return infoArray;\n          }\n          var allInfo = f1(function (oneWindow, infoArray) {\n            try {\n              infoArray.push({ referrer: oneWindow.document.referrer || null, location: oneWindow.location.href || null, isTop: oneWindow === W.top });\n            } catch (e) {\n              infoArray.push({ referrer: null, location: null, isTop: oneWindow === W.top });\n            }\n          });\n          f2(function (n, r) {\n            allInfo[r].ancestor = n;\n          });\n          for (var t = '', e = !1, i = allInfo.length - 1, l = allInfo.length - 1; l >= 0; l--) {\n            t = allInfo[l].location;\n            if (!t && l > 0) {\n              t = allInfo[l - 1].referrer;\n              if (!t) t = allInfo[l - 1].ancestor;\n              if (t) {\n                e = W.location.ancestorOrigins ? !0 : l === allInfo.length - 1 && allInfo[allInfo.length - 1].isTop;\n                break;\n              }\n            }\n          } return { url: t, isTop: e, depth: i };\n        },\n\n        srTestCapabilities: function srTestCapabilities() {\n          var plugins = navigator.plugins;\n          var flashVer = -1;\n          var sf = 'Shockwave Flash';\n\n          if (plugins && plugins.length > 0) {\n            if (plugins[sf + ' 2.0'] || plugins[sf]) {\n              var swVer2 = plugins[sf + ' 2.0'] ? ' 2.0' : '';\n              var flashDescription = plugins[sf + swVer2].description;\n              flashVer = flashDescription.split(' ')[2].split('.')[0];\n            }\n          }\n          if (flashVer > 4) return 15; else return 7;\n        }\n\n      };\n    }());\n\n    // Ad calling functionality\n    CMT.Service = (function () {\n      // Closure variables shared by the service functions\n      var U = CMT.Util;\n\n      return {\n\n        buildSrc: function buildSrc(tag, env) {\n          var src = (document.location.protocol === 'https:' ? 'https://' : 'http://') + (!env || env === 'PRD' ? '' : env === 'PPE' ? 'ppe-' : env === 'STG' ? 'staging-' : '') + 'ad.afy11.net/ad' + '?mode=11' + '&ct=' + U.srTestCapabilities() + '&nif=0' + '&sf=0' + '&sfd=0' + '&ynw=0' + '&rand=' + U.getRand() + '&hb=1' + '&rk1=' + U.getRand() + '&rk2=' + new Date().valueOf() / 1000;\n\n          // Make sure we don't have a response object...\n          delete tag.response;\n\n          // Extracted url info...\n          var urlInfo = U.extractUrlInfo();\n          tag.pageUrl = urlInfo.url;\n          tag.puTop = urlInfo.isTop;\n\n          // Attach the serialized tag to our string\n          src += '&ab=' + U.encodeUriObject(tag);\n\n          return src;\n        },\n\n        getAd: function (zoneKey) {\n          if (!zoneKey) return;\n\n          return this._getData(zoneKey, 'ad') + (this._getResponse().tpCookieSync || ''); // ...also append cookie sync if present\n        },\n\n        // getSecondPrice: function getSecondPrice(zoneKey) {\n        //  if (zoneKey.substring(0, 2) !== 'as') zoneKey = 'as' + zoneKey;\n        //  var bid = this.getBidTrue(zoneKey),\n        //    floor = this._getData(zoneKey, 'floor');\n\n        //  // If no floor, just set it to 80% of the bid\n        //  if (!floor) floor = bid * 0.80;\n\n        //  // Adjust the floor if it's too high...it needs to always be lower\n        //  if (floor >= bid) {\n        //    floor = floor * 0.80; // Take off 20% to account for possible non-adjusted 2nd highest bid\n\n        //    // If it's still too high, just take 80% to 90% of the bid\n        //    if (floor >= bid) floor = bid * ((Math.random() * 10) + 80) / 100;\n        //  }\n        //  return Math.round(floor * 100) / 100;\n        // },\n\n        // setAuctionPrice: function setAuctionPrice(ad, bid) {\n        //  return ad ? ad.replace('${AUCTION_PRICE}', bid) : ad;\n        // },\n\n        getBidTrue: function getBidTrue(zoneKey) {\n          return Math.round(this._getData(zoneKey, 'price') * 100) / 100;\n        },\n\n        _getData: function (zoneKey, field) {\n          const response = this._getResponse();\n          const zoneResponseData = response.zones ? response.zones[zoneKey] : {};\n\n          return (zoneResponseData || {})[field] || null;\n        },\n\n        _getResponse: function () {\n          var tag = W.cdsTag;\n          return (tag && tag.response) ? tag.response : {};\n        },\n      };\n    }());\n\n    return CMT;\n  }\n\n  // Export the callBids function, so that prebid.js can execute this function\n  // when the page asks to send out bid requests.\n  return {\n    callBids: _callBids,\n  };\n}\n\nadaptermanager.registerBidAdapter(new CoxAdapter(), 'cox');\n\nmodule.exports = CoxAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/coxBidAdapter.js"],"sourceRoot":""}