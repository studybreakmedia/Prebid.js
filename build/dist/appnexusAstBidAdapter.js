pbjsChunk([43],{101:function(e,r,a){a(102),e.exports=a(103)},102:function(e,r,a){"use strict";function t(e){if(Array.isArray(e)){for(var r=0,a=Array(e.length);r<e.length;r++)a[r]=e[r];return a}return Array.from(e)}function i(e,r){var a=g.Renderer.install({id:r.renderer_id,url:r.renderer_url,config:{adText:"AppNexus Outstream Video Ad via Prebid.js"},loaded:!1});try{a.setRender(l)}catch(e){h.logWarn("Prebid Error calling setRender on renderer",e)}return a.setEventHandlers({impression:function(){return h.logMessage("AppNexus outstream video impression event")},loaded:function(){return h.logMessage("AppNexus outstream video loaded event")},ended:function(){h.logMessage("AppNexus outstream renderer video event"),document.querySelector("#"+e).style.display="none"}}),a}function s(e){var r=[];return h._each(e,(function(e,a){if(h.isArray(e)){var t=[];h._each(e,(function(e){(e=h.getValueString("keywords."+a,e))&&t.push(e)})),e=t}else{if(e=h.getValueString("keywords."+a,e),!h.isStr(e))return;e=[e]}r.push({key:a,value:e})})),r}function n(e,r){var a={requestId:e.uuid,cpm:r.cpm,creativeId:r.creative_id,dealId:r.deal_id,currency:"USD",netRevenue:!0,ttl:300};if(r.rtb.video)b(a,{width:r.rtb.video.player_width,height:r.rtb.video.player_height,vastUrl:r.rtb.video.asset_url,ttl:3600}),r.renderer_url&&(b(a,{adResponse:e,renderer:i(a.adUnitCode,r)}),a.adResponse.ad=a.adResponse.ads[0],a.adResponse.ad.video=a.adResponse.ad.rtb.video);else if(r.rtb[I.NATIVE]){var t=r.rtb[I.NATIVE];a[I.NATIVE]={title:t.title,body:t.desc,cta:t.ctatext,sponsoredBy:t.sponsored,image:{url:t.main_img&&t.main_img.url,height:t.main_img&&t.main_img.height,width:t.main_img&&t.main_img.width},icon:{url:t.icon&&t.icon.url,height:t.icon&&t.icon.height,width:t.icon&&t.icon.width},clickUrl:t.link.url,clickTrackers:t.link.click_trackers,impressionTrackers:t.impression_trackers}}else{b(a,{width:r.rtb.banner.width,height:r.rtb.banner.height,ad:r.rtb.banner.content});try{var s=r.rtb.trackers[0].impression_urls[0],n=h.createTrackPixelHtml(s);a.ad+=n}catch(e){h.logError("Error appending tracking pixel",e)}}return a}function d(e){var r={};if(r.sizes=o(e.sizes),r.primary_size=r.sizes[0],r.ad_types=[],r.uuid=e.bidId,e.params.placementId?r.id=parseInt(e.params.placementId,10):r.code=e.params.invCode,r.allow_smaller_sizes=e.params.allowSmallerSizes||!1,r.use_pmt_rule=e.params.usePaymentRule||!1,r.prebid=!0,r.disable_psa=!0,e.params.reserve&&(r.reserve=e.params.reserve),e.params.position&&(r.position={above:1,below:2}[e.params.position]||0),e.params.trafficSourceCode&&(r.traffic_source_code=e.params.trafficSourceCode),e.params.privateSizes&&(r.private_sizes=getSizes(e.params.privateSizes)),e.params.supplyType&&(r.supply_type=e.params.supplyType),e.params.pubClick&&(r.pubclick=e.params.pubClick),e.params.extInvCode&&(r.ext_inv_code=e.params.extInvCode),e.params.externalImpId&&(r.external_imp_id=e.params.externalImpId),h.isEmpty(e.params.keywords)||(r.keywords=s(e.params.keywords)),(e.mediaType===I.NATIVE||h.deepAccess(e,"mediaTypes.native"))&&(r.ad_types.push(I.NATIVE),e.nativeParams)){var a=m(e.nativeParams);r[I.NATIVE]={layouts:[a]}}var t=h.deepAccess(e,"mediaTypes.video"),i=h.deepAccess(e,"mediaTypes.video.context");return(e.mediaType===I.VIDEO||t)&&r.ad_types.push(I.VIDEO),(e.mediaType===I.VIDEO||t&&"outstream"!==i)&&(r.require_asset_url=!0),e.params.video&&(r.video={},Object.keys(e.params.video).filter((function(e){return E.includes(e)})).forEach((function(a){return r.video[a]=e.params.video[a]}))),(h.isEmpty(e.mediaType)&&h.isEmpty(e.mediaTypes)||e.mediaType===I.BANNER||e.mediaTypes&&e.mediaTypes[I.BANNER])&&r.ad_types.push(I.BANNER),r}function o(e){var r=[],a={};if(h.isArray(e)&&2===e.length&&!h.isArray(e[0]))a.width=parseInt(e[0],10),a.height=parseInt(e[1],10),r.push(a);else if("object"===(void 0===e?"undefined":v(e)))for(var t=0;t<e.length;t++){var i=e[t];(a={}).width=parseInt(i[0],10),a.height=parseInt(i[1],10),r.push(a)}return r}function p(e){return!!e.params.user}function u(e){return!!parseInt(e.params.member,10)}function c(e){return e&&e.ads&&e.ads.length&&e.ads.find((function(e){return e.rtb}))}function m(e){var r={};return Object.keys(e).forEach((function(a){var t=k[a]&&k[a].serverName||k[a]||a,i=k[a]&&k[a].requiredParams;r[t]=b({},i,e[a]);var s=k[a]&&k[a].minimumParams;if(i&&s){var n=Object.keys(e[a]),d=Object.keys(i);0===n.filter((function(e){return!d.includes(e)})).length&&(r[t]=b({},r[t],s))}})),r}function l(e){e.renderer.push((function(){window.ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},f.bind(null,e))}))}function f(e,r,a){e.renderer.handleVideoEvent({id:r,eventName:a})}function y(e){var r=e.ad_type;return r===I.VIDEO?I.VIDEO:r===I.NATIVE?I.NATIVE:I.BANNER}Object.defineProperty(r,"__esModule",{value:!0}),r.spec=void 0;var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},g=a(17),h=(function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r.default=e,r})(a(0)),_=a(6),I=a(12),E=["id","mimes","minduration","maxduration","startdelay","skippable","playback_method","frameworks"],A=["age","external_uid","segments","gender","dnt","language"],k={body:"description",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0},minimumParams:{sizes:[{}]}},icon:{serverName:"icon",requiredParams:{required:!0},minimumParams:{sizes:[{}]}},sponsoredBy:"sponsored_by"},T=r.spec={code:"appnexusAst",supportedMediaTypes:[I.BANNER,I.VIDEO,I.NATIVE],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.member&&e.params.invCode)},buildRequests:function(e,r){var a=e.map(d),i=e.find(p),s=void 0;i&&(s={},Object.keys(i.params.user).filter((function(e){return A.includes(e)})).forEach((function(e){return s[e]=i.params.user[e]})));var n=e.find(u),o=n?parseInt(n.params.member,10):0,c={tags:[].concat(t(a)),user:s,sdk:{source:"pbjs",version:"0.34.1"}};return o>0&&(c.member_id=o),{method:"POST",url:"//ib.adnxs.com/ut/v3/prebid",data:JSON.stringify(c),bidderRequest:r}},interpretResponse:function(e,r){var a=this,t=r.bidderRequest,i=[];if(!(e=e.body)||e.error){var s="in response for "+t.bidderCode+" adapter";return e&&e.error&&(s+=": "+e.error),h.logError(s),i}return e.tags&&e.tags.forEach((function(e){var r=c(e);if(r&&0!==r.cpm&&a.supportedMediaTypes.includes(r.ad_type)){var t=n(e,r);t.mediaType=y(r),i.push(t)}})),i},getUserSyncs:function(e){if(e.iframeEnabled)return[{type:"iframe",url:"//acdn.adnxs.com/ib/static/usersync/v3/async_usersync.html"}]}};(0,_.registerBidder)(T)},103:function(e,r){}},[101]);