pbjsChunk([75],{265:function(e,t,r){e.exports=r(266)},266:function(e,t,r){"use strict";function i(){return"https:"===location.protocol}function n(e,t){return(t.cpm||0)-(e.cpm||0)}function o(){return[window.screen.width,window.screen.height].join("x")}function a(){var e=(function(){var e=window.DigiTrust&&(v.config.getConfig("digiTrustId")||window.DigiTrust.getUser({member:"T9QSFKPDN9"}));return e&&e.success&&e.identity||null})();return!e||e.privacy&&e.privacy.optout?[]:["dt.id",e.id,"dt.keyv",e.keyv,"dt.pref",0]}function s(e,t){return"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='"+t+"'>\n<script type='text/javascript'>"+e+"<\/script>\n</div>\n</body>\n</html>"}function d(e){var t=e.params;if("video"===e.mediaType){var r=[];return t.video.playerWidth&&t.video.playerHeight?r=[t.video.playerWidth,t.video.playerHeight]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(r=e.sizes[0]),r}return u(Array.isArray(t.sizes)?t.sizes.map((function(e){return(y[e]||"").split("x")})):e.sizes)}function u(e){var t=[15,2,9];return l.parseSizesInput(e).reduce((function(e,t){var r=parseInt(y[t],10);return r&&e.push(r),e}),[]).sort((function(e,r){var i=t.indexOf(e),n=t.indexOf(r);return i>-1||n>-1?-1===i?1:-1===n?-1:i-n:e-r}))}Object.defineProperty(t,"__esModule",{value:!0}),t.spec=void 0;var c=(function(){function e(e,t){var r=[],i=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){n=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.masSizeOrdering=u,t.resetUserSync=function(){m=!1};var l=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t})(r(0)),f=r(6),v=r(8),y={1:"468x60",2:"728x90",5:"120x90",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",43:"320x50",44:"300x50",48:"300x300",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",65:"640x480",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",94:"970x310",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",195:"600x300",199:"640x200",213:"1030x590",214:"980x360"};l._each(y,(function(e,t){return y[e]=t}));var x=t.spec={code:"rubicon",aliases:["rubiconLite"],supportedMediaTypes:["video"],isBidRequestValid:function(e){if("object"!==p(e.params))return!1;var t=e.params;return!!/^\d+$/.test(t.accountId)&&(!(d(e).length<1)&&!!("video"!==e.mediaType||"object"===p(t.video)&&t.video.size_id))},buildRequests:function(e,t){return e.map((function(e){if(e.startTime=(new Date).getTime(),"video"===e.mediaType){var r=e.params,n=d(e),s={page_url:r.referrer?r.referrer:l.getTopWindowUrl(),resolution:o(),account_id:r.accountId,integration:"pbjs_lite_v0.34.1",timeout:t.timeout-(Date.now()-t.auctionStart+500),stash_creatives:!0,ae_pass_through_parameters:r.video.aeParams,slots:[]},u={site_id:r.siteId,zone_id:r.zoneId,position:r.position||"btf",floor:parseFloat(r.floor)>.01?r.floor:.01,element_id:e.adUnitCode,name:e.adUnitCode,language:r.video.language,width:n[0],height:n[1],size_id:r.video.size_id};return r.inventory&&"object"===p(r.inventory)&&(u.inventory=r.inventory),r.keywords&&Array.isArray(r.keywords)&&(u.keywords=r.keywords),r.visitor&&"object"===p(r.visitor)&&(u.visitor=r.visitor),s.slots.push(u),{method:"POST",url:"//fastlane-adv.rubiconproject.com/v1/auction/video",data:s,bidRequest:e}}var c=e.params,f=c.accountId,v=c.siteId,y=c.zoneId,x=c.position,m=c.floor,h=c.keywords,b=c.visitor,_=c.inventory,g=c.userId,w=c.referrer;m=(m=parseFloat(m))>.01?m:.01,x=x||"btf";var j=d(e),z=["account_id",f,"site_id",v,"zone_id",y,"size_id",j[0],"alt_size_ids",j.slice(1).join(",")||void 0,"p_pos",x,"rp_floor",m,"rp_secure",i()?"1":"0","tk_flint","pbjs_lite_v0.34.1","tid",e.transactionId,"p_screen_res",o(),"kw",h,"tk_user_key",g];return null!==b&&"object"===(void 0===b?"undefined":p(b))&&l._each(b,(function(e,t){return z.push("tg_v."+t,e)})),null!==_&&"object"===(void 0===_?"undefined":p(_))&&l._each(_,(function(e,t){return z.push("tg_i."+t,e)})),z.push("rand",Math.random(),"rf",w||l.getTopWindowUrl()),z=z.concat(a()),z=z.reduce((function(e,t,r){return r%2==0&&void 0!==z[r+1]?e+t+"="+encodeURIComponent(z[r+1])+"&":e}),"").slice(0,-1),{method:"GET",url:"//fastlane.rubiconproject.com/a/api/fastlane.json",data:z,bidRequest:e}}))},interpretResponse:function(e,t){var r=t.bidRequest,i=(e=e.body).ads;return"object"!==(void 0===e?"undefined":p(e))||"ok"!==e.status?[]:("object"===(void 0===r?"undefined":p(r))&&"video"===r.mediaType&&"object"===(void 0===i?"undefined":p(i))&&(i=i[r.adUnitCode]),!Array.isArray(i)||i.length<1?[]:(i=i.sort(n)).reduce((function(e,t){if("ok"!==t.status)return[];var i={requestId:r.bidId,currency:"USD",creativeId:t.creative_id,cpm:t.cpm||0,dealId:t.deal,ttl:300,netRevenue:v.config.getConfig("rubicon.netRevenue")||!1};if("video"===r.mediaType)i.width=r.params.video.playerWidth,i.height=r.params.video.playerHeight,i.vastUrl=t.creative_depot_url,i.impression_id=t.impression_id;else{i.ad=s(t.script,t.impression_id);var n=y[t.size_id].split("x").map((function(e){return Number(e)})),o=c(n,2);i.width=o[0],i.height=o[1]}return i.rubiconTargeting=(Array.isArray(t.targeting)?t.targeting:[]).reduce((function(e,t){return e[t.key]=t.values[0],e}),{rpfl_elemid:r.adUnitCode}),e.push(i),e}),[]))},getUserSyncs:function(e){if(!m&&e.iframeEnabled)return m=!0,{type:"iframe",url:"https://tap-secure.rubiconproject.com/partner/scripts/rubicon/emily.html?rtb_ext=1"}}},m=!1;(0,f.registerBidder)(x)}},[265]);