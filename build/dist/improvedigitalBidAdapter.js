pbjsChunk([33],{171:function(e,r,t){t(172),e.exports=t(173)},172:function(e,r,t){"use strict";function i(e){var r=a.getBidIdParameter("adUnitCode",e)||null,t=a.getBidIdParameter("placementId",e.params)||null,i=null,n=null;null===t&&(i=a.getBidIdParameter("publisherId",e.params)||null,n=a.getBidIdParameter("placementKey",e.params)||null);var s=a.getBidIdParameter("keyValues",e.params)||null,d=a.getBidIdParameter("size",e.params)||null,u=a.getBidIdParameter("bidId",e),o=a.getBidIdParameter("transactionId",e),p={};return t?p.placementId=t:(i&&(p.publisherId=i),n&&(p.placementKey=n)),s&&(p.keyValues=s),d&&d.w&&d.h&&(p.size={},p.size.h=d.h,p.size.w=d.w),u&&(p.id=u),r&&(p.adUnitId=r),o&&(p.transactionId=o),p}function n(e){this.CONSTANTS={HTTP_REQUEST_TYPE:{GET:0,POST:1},HTTP_SECURITY:{STANDARD:0,SECURE:1},AD_SERVER_BASE_URL:"ad.360yield.com",END_POINT:e||"hb",AD_SERVER_URL_PARAM:"jsonp=",CLIENT_VERSION:"JS-4.2.0",MAX_URL_LENGTH:2083,ERROR_CODES:{BAD_HTTP_REQUEST_TYPE_PARAM:1,MISSING_PLACEMENT_PARAMS:2,LIB_VERSION_MISSING:3},RETURN_OBJ_TYPE:{DEFAULT:0,PREBID:1}},this.getErrorReturn=function(e){return{idMappings:{},requests:{},errorCode:e}},this.createRequest=function(e,r,t){if(r.httpRequestType!==this.CONSTANTS.HTTP_REQUEST_TYPE.GET)return this.getErrorReturn(this.CONSTANTS.ERROR_CODES.BAD_HTTP_REQUEST_TYPE_PARAM);if(!r.libVersion)return this.getErrorReturn(this.CONSTANTS.ERROR_CODES.LIB_VERSION_MISSING);r.returnObjType=r.returnObjType||this.CONSTANTS.RETURN_OBJ_TYPE.DEFAULT;var i=[],n=void 0,s=void 0;if(a.isArray(e))for(s=0;s<e.length;s++)n=this.createImpressionObject(e[s]),i.push(n);else n=this.createImpressionObject(e),i.push(n);var d=!0;r.returnObjType===this.CONSTANTS.RETURN_OBJ_TYPE.PREBID&&(d=!1);var u={};u.requests=[],d&&(u.idMappings=[]);var o=null,p=(1===r.secure?"https":"http")+"://"+this.CONSTANTS.AD_SERVER_BASE_URL+"/"+this.CONSTANTS.END_POINT+"?"+this.CONSTANTS.AD_SERVER_URL_PARAM,l={bid_request:this.createBasicBidRequestObject(r,t)};for(s=0;s<i.length;s++)if((n=i[s]).errorCode)(o=o||[]).push({errorCode:n.errorCode,adUnitId:n.adUnitId});else{d&&u.idMappings.push({adUnitId:n.adUnitId,id:n.impressionObject.id}),l.bid_request.imp=l.bid_request.imp||[],l.bid_request.imp.push(n.impressionObject);var c=!1;(p+encodeURIComponent(JSON.stringify(l))).length>this.CONSTANTS.MAX_URL_LENGTH&&(c=!0,l.bid_request.imp.length>1&&(l.bid_request.imp.pop(),d&&u.idMappings.pop(),s--)),!c&&r.singleRequestMode&&s!==i.length-1||(u.requests.push(this.formatRequest(r,l)),l={bid_request:this.createBasicBidRequestObject(r,t)})}return o&&(u.errors=o),u},this.formatRequest=function(e,r){switch(e.returnObjType){case this.CONSTANTS.RETURN_OBJ_TYPE.PREBID:return{method:"GET",url:"//"+this.CONSTANTS.AD_SERVER_BASE_URL+"/"+this.CONSTANTS.END_POINT,data:""+this.CONSTANTS.AD_SERVER_URL_PARAM+JSON.stringify(r)};default:return{url:(1===e.secure?"https":"http")+"://"+this.CONSTANTS.AD_SERVER_BASE_URL+"/"+this.CONSTANTS.END_POINT+"?"+this.CONSTANTS.AD_SERVER_URL_PARAM+encodeURIComponent(JSON.stringify(r))}}},this.createBasicBidRequestObject=function(e,r){var t={};if(e.requestId?t.id=e.requestId:t.id=a.getUniqueIdentifierStr(),e.domain&&(t.domain=e.domain),e.page&&(t.page=e.page),e.ref&&(t.ref=e.ref),e.callback&&(t.callback=e.callback),"secure"in e&&(t.secure=e.secure),e.libVersion&&(t.version=e.libVersion+"-"+this.CONSTANTS.CLIENT_VERSION),r)for(var i in r)t[i]=r[i];return t},this.createImpressionObject=function(e){var r={},t={};if(r.impressionObject=t,e.id?t.id=e.id:t.id=a.getUniqueIdentifierStr(),e.adUnitId&&(r.adUnitId=e.adUnitId),e.placementId&&(t.pid=e.placementId),e.publisherId&&(t.pubid=e.publisherId),e.placementKey&&(t.pkey=e.placementKey),e.transactionId&&(t.tid=e.transactionId),e.keyValues)for(var i in e.keyValues)for(var n=0;n<e.keyValues[i].length;n++)t.kvw=t.kvw||{},t.kvw[i]=t.kvw[i]||[],t.kvw[i].push(e.keyValues[i][n]);return e.size&&e.size.w&&e.size.h?(t.banner={},t.banner.w=e.size.w,t.banner.h=e.size.h):t.banner={},t.pid||t.pubid||t.pkey||t.banner&&t.banner.w&&t.banner.h||(r.impressionObject=null,r.errorCode=this.CONSTANTS.ERROR_CODES.MISSING_PLACEMENT_PARAMS),r}}Object.defineProperty(r,"__esModule",{value:!0}),r.spec=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=(function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r})(t(0)),d=t(6),u=t(18),o=r.spec={version:"4.0.0",code:"improvedigital",aliases:["id"],isBidRequestValid:function(e){return!!(e&&e.params&&(e.params.placementId||e.params.placementKey&&e.params.publisherId))},buildRequests:function(e){var r=e.map((function(e){return i(e)})),t=new n("hb"),s={singleRequestMode:!1,httpRequestType:t.CONSTANTS.HTTP_REQUEST_TYPE.GET,returnObjType:t.CONSTANTS.RETURN_OBJ_TYPE.PREBID,libVersion:this.version},d=t.createRequest(r,s);return d.errors&&d.errors.length>0&&a.logError("ID WARNING 0x01"),d.requests},interpretResponse:function(e,r){var t=[];return a._each(e.body.bid,(function(e){if(e.price&&null!==e.price&&!e.hasOwnProperty("errorCode")&&"string"==typeof e.adm){var r={},i="";e.nurl&&e.nurl.length>0&&(i='<img src="'+e.nurl+'" width="0" height="0" style="display:none">'),r.ad=i+"<script>"+e.adm+"<\/script>",r.adId=e.id,r.cpm=parseFloat(e.price),r.creativeId=e.crid,r.currency=e.currency?e.currency.toUpperCase():"USD",a.isNumber(e.lid)?r.dealId=e.lid:"object"===s(e.lid)&&e.lid[1]&&(r.dealId=e.lid[1]),r.height=e.h,r.netRevenue=!!e.isNet&&e.isNet,r.requestId=e.id,r.ttl=300,r.width=e.w,t.push(r),a.isArray(e.sync)&&a._each(e.sync,(function(e){u.userSync.registerSync("image",o.code,e)}))}})),t}};(0,d.registerBidder)(o),r.ImproveDigitalAdServerJSClient=n},173:function(e,r){}},[171]);